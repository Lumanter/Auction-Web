<%- include('../partials/header'); %>

<div class="container mt-3" style="width: 80%; margin: 25px auto;">

    <div class="card">
        <h5 class="card-header"><%= shownUser.nickname %></h5>
        <div class="card-body">
            <div class="row">
                <h6 class="col-5 card-title">Id</h6>
                <div class="col-5">
                    <p class="card-text"><%= shownUser.id %></p>
                </div>
            </div>

            <div class="row">
                <h6 class="col-5 card-title">Admin</h6>
                <div class="col-5">
                    <p class="card-text"><%= shownUser.isadmin %></p>
                </div>
            </div>

            <div class="row">
                <h6 class="col-5 card-title">Email</h6>
                <div class="col-5">
                    <p class="card-text"><%= shownUser.email %></p>
                </div>
            </div>

            <div class="row">
                <h6 class="col-5 card-title">First Name</h6>
                <div class="col-5">
                    <p class="card-text"><%= shownUser.firstname %></p>
                </div>
            </div>

            <div class="row">
                <h6 class="col-5 card-title">Last Name</h6>
                <div class="col-5">
                    <p class="card-text"><%= shownUser.lastname %></p>
                </div>
            </div>

            <div class="row">
                <h6 class="col-5 card-title">Phone Number</h6>
                <div class="col-5">
                    <p class="card-text"><%= shownUser.phonenumber %></p>
                </div>
            </div>

            <div class="row">
                <h6 class="col-5 card-title">Home Number</h6>
                <div class="col-5">
                    <p class="card-text"><%= shownUser.homenumber %></p>
                </div>
            </div>
 
            <% if (user.isadmin) { %>
                <a class="btn btn-outline-info btn-md" href="/users/<%= shownUser.id %>/edit">edit</a>
            <% } %>
        </div>
    </div>


    <% if (!shownUser.isadmin) { %>
        <div class="row mt-2">
            <div class="col-6">
                <div class="card">
                    <h6 class="card-header">Buyer History</h6>
                    <ul class="list-group list-group-flush">
                        <% buyerHistory.forEach((bid) => { %>
                            <li class="list-group-item">
                                Bid <strong>₡<%= bid.amount %></strong> on <a href="/auctions/<%= bid.auctionid %>"><%= bid.itemname %></a>
                                <br>
                                <small>Base price ₡<%= bid.baseprice %></small>
                                <br>
                                <small><em><%= bid.biddate.split(' ')[0] %> at <%= bid.biddate.split(' ')[1].slice(0, -7) %></em></small>
                                <% if (bid.windate) { %>
                                    <br>
                                    <h5 class="text-center text-warning">Winner bid!</h5>
                                <% } %>
                                <% if (bid.sellercomment || bid.sellerrating) { %>
                                    Seller: 
                                    <% if (bid.sellercomment) { %>
                                        <%= bid.sellercomment %>
                                    <% } %>
                                    <% if (bid.sellerrating) { %>
                                        (<%= bid.sellerrating %>/5)
                                    <% } %>
                                <% } %>
                            </li>
                        <% }); %>
                    </ul>
                </div>
            </div>
            
            <div class="col-6">
                <div class="card">
                    <h6 class="card-header">Seller History</h6>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    <% } %>
</div>
       
<%- include('../partials/footer'); %>